<Application x:Class="LangVPlayer.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:LangVPlayer"
             xmlns:helpers="clr-namespace:LangVPlayer.Helpers"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <!-- Converters / Конвертеры -->
            <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            
            <!-- Dark Theme Colors / Цвета темной темы -->
            <Color x:Key="PrimaryBackgroundColor">#1E1E1E</Color>
            <Color x:Key="SecondaryBackgroundColor">#2D2D30</Color>
            <Color x:Key="TitleBarColor">#323232</Color>
            <Color x:Key="AccentColor">#007ACC</Color>
            <Color x:Key="TextColor">#FFFFFF</Color>
            <Color x:Key="TextSecondaryColor">#9E9E9E</Color>
            <Color x:Key="BorderColor">#3F3F46</Color>

            <!-- Brushes / Кисти -->
            <SolidColorBrush x:Key="PrimaryBackgroundBrush" Color="{StaticResource PrimaryBackgroundColor}"/>
            <SolidColorBrush x:Key="SecondaryBackgroundBrush" Color="{StaticResource SecondaryBackgroundColor}"/>
            <SolidColorBrush x:Key="TitleBarBrush" Color="{StaticResource TitleBarColor}"/>
            <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
            <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextColor}"/>
            <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondaryColor}"/>
            <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>

            <!-- TitleBar Button Style / Стиль кнопок TitleBar -->
            <Style x:Key="TitleBarButtonStyle" TargetType="Button">
                <Setter Property="Width" Value="46"/>
                <Setter Property="Height" Value="30"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                <Setter Property="FontSize" Value="10"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#3F3F3F"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#007ACC"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Close Button Style / Стиль кнопки закрытия -->
            <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource TitleBarButtonStyle}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#E81123"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#F1707A"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Pin Button Style (Toggle) / Стиль кнопки Pin (переключатель) -->
            <Style x:Key="PinButtonStyle" TargetType="ToggleButton">
                <Setter Property="Width" Value="46"/>
                <Setter Property="Height" Value="30"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="border" Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#3F3F3F"/>
                                </Trigger>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#007ACC"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Control Button Style / Стиль кнопок управления -->
            <Style x:Key="ControlButtonStyle" TargetType="Button">
                <Setter Property="Width" Value="50"/>
                <Setter Property="Height" Value="50"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                <Setter Property="FontSize" Value="20"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="25">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#3F3F3F"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#007ACC"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Video Slider Style / Стиль ползунка видео -->
            <Style x:Key="VideoSliderStyle" TargetType="Slider">
                <Setter Property="Height" Value="28"/>
                <Setter Property="Background" Value="#3F3F3F"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Slider">
                            <Grid>
                                <Border x:Name="TrackBackground" Height="8" Background="#3F3F3F" CornerRadius="4" VerticalAlignment="Center"/>
                                <Track x:Name="PART_Track">
                                    <Track.DecreaseRepeatButton>
                                        <RepeatButton Command="Slider.DecreaseLarge">
                                            <RepeatButton.Template>
                                                <ControlTemplate TargetType="RepeatButton">
                                                    <Border Height="8" Background="#007ACC" CornerRadius="4"/>
                                                </ControlTemplate>
                                            </RepeatButton.Template>
                                        </RepeatButton>
                                    </Track.DecreaseRepeatButton>
                                    <Track.Thumb>
                                        <Thumb>
                                            <Thumb.Template>
                                                <ControlTemplate TargetType="Thumb">
                                                    <Ellipse Width="18" Height="18" Fill="#FFFFFF"/>
                                                </ControlTemplate>
                                            </Thumb.Template>
                                        </Thumb>
                                    </Track.Thumb>
                                    <Track.IncreaseRepeatButton>
                                        <RepeatButton Command="Slider.IncreaseLarge">
                                            <RepeatButton.Template>
                                                <ControlTemplate TargetType="RepeatButton">
                                                    <Border Background="Transparent"/>
                                                </ControlTemplate>
                                            </RepeatButton.Template>
                                        </RepeatButton>
                                    </Track.IncreaseRepeatButton>
                                </Track>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Menu Dark Theme Style / Стиль меню в темной теме -->
            <Style TargetType="Menu">
                <Setter Property="Background" Value="{StaticResource TitleBarBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
            </Style>

            <!-- Context Menu Popup Style / Стиль всплывающего меню -->
            <Style TargetType="ContextMenu">
                <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="2"/>
            </Style>

            <!-- MenuItem TopLevel Header Style / Стиль заголовка меню верхнего уровня -->
            <Style x:Key="MenuItemTopLevelHeaderStyle" TargetType="MenuItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="8,4"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="MenuItem">
                            <Border x:Name="Border" 
                                    Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter ContentSource="Header"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsHighlighted" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#3C3C3C"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- MenuItem Style with Submenu / Стиль пункта меню с подменю -->
            <Style TargetType="MenuItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="10,6"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="MenuItem">
                            <Grid>
                                <!-- Main MenuItem Area / Основная область пункта меню -->
                                <Border x:Name="Border" 
                                        Background="{TemplateBinding Background}" 
                                        BorderThickness="0"
                                        CornerRadius="4"
                                        Margin="4,2">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="28"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="16"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Icon Column / Колонка иконки -->
                                        <ContentPresenter x:Name="IconPresenter"
                                                          Grid.Column="0"
                                                          ContentSource="Icon"
                                                          Width="16" Height="16"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          Margin="4,0,0,0"/>
                                        
                                        <!-- Check Mark for IsCheckable / Галочка для чекбоксов -->
                                        <TextBlock x:Name="CheckMark" 
                                                   Grid.Column="0"
                                                   Text="&#xE73E;" 
                                                   FontFamily="Segoe MDL2 Assets"
                                                   FontSize="12"
                                                   Foreground="{StaticResource AccentBrush}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Visibility="Collapsed"/>
                                        
                                        <!-- Header / Заголовок -->
                                        <ContentPresenter Grid.Column="1" 
                                                          ContentSource="Header" 
                                                          Margin="8,6"
                                                          VerticalAlignment="Center"/>
                                        
                                        <!-- Input Gesture Text / Сочетание клавиш -->
                                        <TextBlock Grid.Column="2" 
                                                   Text="{TemplateBinding InputGestureText}" 
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="11"
                                                   Margin="20,0,10,0"
                                                   VerticalAlignment="Center"/>
                                        
                                        <!-- Submenu Arrow / Стрелка подменю -->
                                        <Path x:Name="SubMenuArrow" 
                                              Grid.Column="3" 
                                              Data="M0,0 L4,4 L0,8" 
                                              Fill="{StaticResource TextSecondaryBrush}"
                                              VerticalAlignment="Center"
                                              Margin="0,0,8,0"
                                              Visibility="Collapsed"/>
                                    </Grid>
                                </Border>
                                
                                <!-- Submenu Popup / Всплывающее подменю -->
                                <Popup x:Name="PART_Popup"
                                       IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                       Placement="Right"
                                       PlacementTarget="{Binding ElementName=Border}"
                                       AllowsTransparency="True"
                                       Focusable="False"
                                       PopupAnimation="Fade">
                                    <Border Background="{StaticResource SecondaryBackgroundBrush}"
                                            BorderBrush="{StaticResource BorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Margin="8"
                                            Padding="4">
                                        <Border.Effect>
                                            <DropShadowEffect Color="Black" 
                                                              BlurRadius="15" 
                                                              ShadowDepth="3" 
                                                              Opacity="0.4"/>
                                        </Border.Effect>
                                        <StackPanel IsItemsHost="True" 
                                                    KeyboardNavigation.DirectionalNavigation="Cycle"/>
                                    </Border>
                                </Popup>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <!-- Highlight on hover / Подсветка при наведении -->
                                <Trigger Property="IsHighlighted" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#3C3C3C"/>
                                </Trigger>
                                <!-- Show arrow for items with submenu / Показать стрелку для элементов с подменю -->
                                <Trigger Property="Role" Value="SubmenuHeader">
                                    <Setter TargetName="SubMenuArrow" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <!-- Show checkmark for checked items / Показать галочку для отмеченных элементов -->
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsCheckable" Value="True"/>
                                        <Condition Property="IsChecked" Value="True"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                    <Setter TargetName="IconPresenter" Property="Visibility" Value="Collapsed"/>
                                </MultiTrigger>
                                <!-- Top level header popup placement / Размещение popup для заголовков верхнего уровня -->
                                <Trigger Property="Role" Value="TopLevelHeader">
                                    <Setter TargetName="PART_Popup" Property="Placement" Value="Bottom"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="Separator">
                <Setter Property="Background" Value="{StaticResource BorderBrush}"/>
                <Setter Property="Margin" Value="10,4"/>
                <Setter Property="Height" Value="1"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Separator">
                            <Border Background="{StaticResource BorderBrush}" 
                                    Height="1" 
                                    Margin="{TemplateBinding Margin}"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Application.Resources>
</Application>
