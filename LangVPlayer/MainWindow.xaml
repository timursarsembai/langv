<Window x:Class="LangVPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LangVPlayer"
        xmlns:wf="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
        mc:Ignorable="d"
        Title="LangV Player"
        Height="720" Width="1280"
        MinHeight="400" MinWidth="600"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="{StaticResource PrimaryBackgroundBrush}"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        KeyDown="Window_KeyDown">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" ResizeBorderThickness="5"/>
    </WindowChrome.WindowChrome>
    
    <Grid>
        <Grid.RowDefinitions>
            <!-- TitleBar / Заголовок -->
            <RowDefinition Height="30"/>
            <!-- Video Area / Область видео -->
            <RowDefinition Height="*"/>
            <!-- Control Panel / Панель управления -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Custom TitleBar / Кастомный заголовок -->
        <Grid Grid.Row="0" Background="{StaticResource TitleBarBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- App Title / Название приложения -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                <TextBlock Text="🎬" FontSize="14" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBlock Text="LangV Player" Foreground="{StaticResource TextBrush}" FontSize="12" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Window Buttons / Кнопки окна -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <!-- Pin Button / Кнопка закрепления -->
                <ToggleButton x:Name="PinButton" 
                              Style="{StaticResource PinButtonStyle}" 
                              Content="&#xE718;"
                              ToolTip="Always on Top / Всегда поверх"
                              Checked="PinButton_Checked"
                              Unchecked="PinButton_Unchecked"/>
                
                <!-- Minimize Button / Кнопка сворачивания -->
                <Button Style="{StaticResource TitleBarButtonStyle}" 
                        Content="&#xE921;" 
                        Click="MinimizeButton_Click"
                        ToolTip="Minimize / Свернуть"/>
                
                <!-- Maximize Button / Кнопка развертывания -->
                <Button x:Name="MaximizeButton"
                        Style="{StaticResource TitleBarButtonStyle}" 
                        Content="&#xE922;" 
                        Click="MaximizeButton_Click"
                        ToolTip="Maximize / Развернуть"/>
                
                <!-- Close Button / Кнопка закрытия -->
                <Button Style="{StaticResource CloseButtonStyle}" 
                        Content="&#xE8BB;" 
                        Click="CloseButton_Click"
                        ToolTip="Close / Закрыть"/>
            </StackPanel>
        </Grid>

        <!-- Video Area / Область видео -->
        <Grid Grid.Row="1" Background="Black" x:Name="VideoArea">
            <!-- MPV Host - WindowsFormsHost for MPV player / WindowsFormsHost для MPV плеера -->
            <wf:WindowsFormsHost x:Name="MpvHost" Background="Transparent">
                <wf:WindowsFormsHost.Child>
                    <x:Null/>
                </wf:WindowsFormsHost.Child>
            </wf:WindowsFormsHost>
            
            <!-- Placeholder when no video / Заглушка при отсутствии видео -->
            <StackPanel x:Name="NoVideoPlaceholder" 
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center"
                        Visibility="Visible">
                <TextBlock Text="🎬" FontSize="64" HorizontalAlignment="Center" Foreground="{StaticResource TextSecondaryBrush}"/>
                <TextBlock Text="Drop video file here or click to open" 
                           Foreground="{StaticResource TextSecondaryBrush}" 
                           FontSize="16" 
                           HorizontalAlignment="Center"
                           Margin="0,10,0,0"/>
                <TextBlock Text="Перетащите видеофайл сюда или нажмите для открытия" 
                           Foreground="{StaticResource TextSecondaryBrush}" 
                           FontSize="12" 
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                <Button x:Name="OpenFileButton" 
                        Content="📁 Open Video / Открыть видео" 
                        Margin="0,20,0,0"
                        Padding="20,10"
                        Background="{StaticResource AccentBrush}"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="14"
                        Cursor="Hand"
                        Click="OpenFileButton_Click"/>
            </StackPanel>
        </Grid>

        <!-- Control Panel / Панель управления -->
        <Grid Grid.Row="2" x:Name="ControlPanel" Background="{StaticResource SecondaryBackgroundBrush}" Height="80">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Timeline Slider / Ползунок таймлайна -->
            <Grid Grid.Row="0" Margin="15,10,15,0">
                <Slider x:Name="TimelineSlider" 
                        Style="{StaticResource VideoSliderStyle}"
                        Minimum="0" 
                        Maximum="100" 
                        Value="0"
                        ValueChanged="TimelineSlider_ValueChanged"
                        PreviewMouseDown="TimelineSlider_PreviewMouseDown"
                        PreviewMouseUp="TimelineSlider_PreviewMouseUp"/>
            </Grid>

            <!-- Controls / Элементы управления -->
            <Grid Grid.Row="1" Margin="15,5,15,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Time Display / Отображение времени -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock x:Name="CurrentTimeText" 
                               Text="00:00:00" 
                               Foreground="{StaticResource TextBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    <TextBlock Text=" / " 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="TotalTimeText" 
                               Text="00:00:00" 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Playback Controls / Кнопки воспроизведения -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- Rewind / Перемотка назад -->
                    <Button Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xEB9E;" 
                            Width="40" Height="40"
                            Click="RewindButton_Click"
                            ToolTip="Rewind 10s / Назад 10с"/>
                    
                    <!-- Play/Pause / Воспроизведение/Пауза -->
                    <Button x:Name="PlayPauseButton" 
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xE768;" 
                            Click="PlayPauseButton_Click"
                            ToolTip="Play/Pause / Воспроизведение/Пауза"/>
                    
                    <!-- Forward / Перемотка вперед -->
                    <Button Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xEB9D;" 
                            Width="40" Height="40"
                            Click="ForwardButton_Click"
                            ToolTip="Forward 10s / Вперед 10с"/>
                </StackPanel>

                <!-- Volume & Fullscreen / Громкость и полный экран -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Volume Icon / Иконка громкости -->
                    <TextBlock x:Name="VolumeIcon" 
                               Text="&#xE767;" 
                               FontFamily="Segoe MDL2 Assets" 
                               FontSize="16"
                               Foreground="{StaticResource TextBrush}" 
                               VerticalAlignment="Center"
                               Margin="0,0,5,0"/>
                    
                    <!-- Volume Slider / Ползунок громкости -->
                    <Slider x:Name="VolumeSlider" 
                            Width="80" 
                            Minimum="0" 
                            Maximum="100" 
                            Value="100"
                            VerticalAlignment="Center"
                            ValueChanged="VolumeSlider_ValueChanged"/>
                    
                    <!-- Fullscreen Button / Кнопка полного экрана -->
                    <Button x:Name="FullscreenButton"
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xE740;" 
                            Width="40" Height="40"
                            Margin="10,0,0,0"
                            Click="FullscreenButton_Click"
                            ToolTip="Fullscreen / Полный экран"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>
