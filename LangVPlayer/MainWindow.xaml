<Window x:Class="LangVPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LangVPlayer"
        xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
        mc:Ignorable="d"
        Title="LangV Player"
        Height="720" Width="1280"
        MinHeight="400" MinWidth="600"
        WindowStyle="None"
        AllowsTransparency="True"
        Icon="langvplayer.ico"
        Background="{StaticResource PrimaryBackgroundBrush}"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        SizeChanged="Window_SizeChanged"
        PreviewKeyDown="Window_PreviewKeyDown"
        PreviewMouseDown="Window_PreviewMouseDown">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" ResizeBorderThickness="5"/>
    </WindowChrome.WindowChrome>
    
    <Window.Resources>
        <!-- Style for menu button / Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¼ÐµÐ½ÑŽ -->
        <Style x:Key="MenuButtonStyle" TargetType="MenuItem">
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Grid>
                            <Border x:Name="Border" 
                                    Background="Transparent" 
                                    BorderThickness="0"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter ContentSource="Header" 
                                                  HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"/>
                            </Border>
                            <Popup x:Name="PART_Popup"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                   Placement="Bottom"
                                   PlacementTarget="{Binding ElementName=Border}"
                                   PopupAnimation="Fade">
                                <Border Background="#FF2D2D30" 
                                        BorderBrush="#FF3F3F46" 
                                        BorderThickness="1"
                                        Margin="0,0,8,8">
                                    <Border.Effect>
                                        <DropShadowEffect ShadowDepth="2" Opacity="0.5" BlurRadius="5"/>
                                    </Border.Effect>
                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle"/>
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#40FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsSubmenuOpen" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#40FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <!-- Main content / ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
            <ColumnDefinition Width="*"/>
            <!-- Playlist panel / ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Main Player Area / ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ Ð¿Ð»ÐµÐµÑ€Ð° -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <!-- TitleBar / Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
                <RowDefinition x:Name="TitleBarRow" Height="30"/>
                <!-- Video Area / ÐžÐ±Ð»Ð°ÑÑ‚ÑŒ Ð²Ð¸Ð´ÐµÐ¾ -->
                <RowDefinition Height="*"/>
                <!-- Control Panel / ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

        <!-- Custom TitleBar / ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <Grid x:Name="TitleBar" Grid.Row="0" Background="{StaticResource TitleBarBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Menu / ÐœÐµÐ½ÑŽ -->
            <Menu Grid.Column="0" 
                  Background="Transparent" 
                  Foreground="{StaticResource TextBrush}" 
                  VerticalAlignment="Center"
                  Margin="5,0,0,0"
                  FontSize="14">
                <MenuItem x:Name="MenuButton" 
                          Header="â˜°" 
                          FontSize="18" 
                          FontWeight="Bold"
                          Style="{StaticResource MenuButtonStyle}">
                        <!-- File Menu / ÐœÐµÐ½ÑŽ Ð¤Ð°Ð¹Ð» -->
                        <MenuItem x:Name="MenuFile" Header="Ð¤Ð°Ð¹Ð»">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE8E5;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <MenuItem x:Name="MenuOpenFile" Header="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»..." Click="MenuOpenFile_Click" InputGestureText="Ctrl+O">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE8E5;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuExit" Header="Ð’Ñ‹Ñ…Ð¾Ð´" Click="CloseButton_Click" InputGestureText="Alt+F4">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE7E8;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <!-- Playback Menu / ÐœÐµÐ½ÑŽ Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ -->
                    <MenuItem x:Name="MenuPlayback" Header="Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE768;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <MenuItem x:Name="MenuPlayPause" Header="Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÑÑ‚Ð¸" Click="PlayPauseButton_Click" InputGestureText="Space">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE768;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuStop" Header="Ð¡Ñ‚Ð¾Ð¿" Click="MenuStop_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE71A;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuRewind" Header="ÐÐ°Ð·Ð°Ð´ (-10Ñ)" Click="RewindButton_Click" InputGestureText="â†">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEB9E;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuForward" Header="Ð’Ð¿ÐµÑ€Ñ‘Ð´ (+10Ñ)" Click="ForwardButton_Click" InputGestureText="â†’">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEB9D;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuVolumeUp" Header="Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ +" Click="MenuVolumeUp_Click" InputGestureText="â†‘">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE995;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuVolumeDown" Header="Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ -" Click="MenuVolumeDown_Click" InputGestureText="â†“">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE993;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <!-- Speed Submenu / ÐŸÐ¾Ð´Ð¼ÐµÐ½ÑŽ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ -->
                        <MenuItem x:Name="MenuSpeed" Header="Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEC57;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                            <MenuItem x:Name="MenuSpeedUp" Header="Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ñ‚ÑŒ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ" Click="SpeedUp_Click" InputGestureText="]"/>
                            <MenuItem x:Name="MenuSpeedDown" Header="Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚ÑŒ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ" Click="SpeedDown_Click" InputGestureText="["/>
                            <MenuItem x:Name="MenuSpeedReset" Header="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ (1.0x)" Click="SpeedReset_Click" InputGestureText="Backspace"/>
                            <Separator/>
                            <MenuItem x:Name="Speed025" Header="0.25x" Click="SpeedPreset_Click" Tag="0.25"/>
                            <MenuItem x:Name="Speed050" Header="0.5x" Click="SpeedPreset_Click" Tag="0.5"/>
                            <MenuItem x:Name="Speed075" Header="0.75x" Click="SpeedPreset_Click" Tag="0.75"/>
                            <MenuItem x:Name="Speed100" Header="1.0x (Ð½Ð¾Ñ€Ð¼.)" Click="SpeedPreset_Click" Tag="1.0"/>
                            <MenuItem x:Name="Speed125" Header="1.25x" Click="SpeedPreset_Click" Tag="1.25"/>
                            <MenuItem x:Name="Speed150" Header="1.5x" Click="SpeedPreset_Click" Tag="1.5"/>
                            <MenuItem x:Name="Speed175" Header="1.75x" Click="SpeedPreset_Click" Tag="1.75"/>
                            <MenuItem x:Name="Speed200" Header="2.0x" Click="SpeedPreset_Click" Tag="2.0"/>
                        </MenuItem>
                    </MenuItem>
                    <!-- Audio Menu / ÐœÐµÐ½ÑŽ ÐÑƒÐ´Ð¸Ð¾ -->
                    <MenuItem x:Name="MenuAudio" Header="ÐÑƒÐ´Ð¸Ð¾">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE767;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <!-- Audio Tracks submenu / ÐŸÐ¾Ð´Ð¼ÐµÐ½ÑŽ Ð°ÑƒÐ´Ð¸Ð¾Ð´Ð¾Ñ€Ð¾Ð¶ÐµÐº -->
                        <MenuItem x:Name="MenuAudioTracks" Header="ÐÑƒÐ´Ð¸Ð¾Ð´Ð¾Ñ€Ð¾Ð¶ÐºÐ°">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE8D6;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                            <!-- Dynamic items added in code / Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑŽÑ‚ÑÑ Ð² ÐºÐ¾Ð´Ðµ -->
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuVolumeUpAudio" Header="Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ñ‚ÑŒ Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ" Click="MenuVolumeUp_Click" InputGestureText="â†‘">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE995;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuVolumeDownAudio" Header="Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚ÑŒ Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ" Click="MenuVolumeDown_Click" InputGestureText="â†“">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE993;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuMute" Header="Ð’Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð·Ð²ÑƒÐº" Click="MenuMute_Click" InputGestureText="M">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE74F;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <!-- View Menu / ÐœÐµÐ½ÑŽ Ð’Ð¸Ð´ -->
                    <MenuItem x:Name="MenuView" Header="Ð’Ð¸Ð´">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE740;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <MenuItem x:Name="MenuFullscreen" Header="ÐÐ° Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½" Click="FullscreenButton_Click" InputGestureText="F11">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE740;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuCompactMode" Header="ÐšÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼" Click="CompactModeButton_Click" InputGestureText="P">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEE47;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuAlwaysOnTop" Header="ÐŸÐ¾Ð²ÐµÑ€Ñ… Ð²ÑÐµÑ… Ð¾ÐºÐ¾Ð½" IsCheckable="True" 
                                  Checked="MenuAlwaysOnTop_Checked" Unchecked="MenuAlwaysOnTop_Unchecked">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE718;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <!-- Subtitles Menu / ÐœÐµÐ½ÑŽ Ð¡ÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ -->
                    <MenuItem x:Name="MenuSubtitles" Header="Ð¡ÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE8BD;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <!-- Embedded subtitles 1 submenu / ÐŸÐ¾Ð´Ð¼ÐµÐ½ÑŽ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ñ… ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ð¾Ð² 1 -->
                        <MenuItem x:Name="MenuEmbeddedSubs1" Header="Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ðµ (ÑÐ»Ð¾Ñ‚ 1)">
                            <MenuItem.Icon>
                                <TextBlock Text="1ï¸âƒ£" FontSize="12"/>
                            </MenuItem.Icon>
                            <MenuItem x:Name="MenuEmbeddedSubs1None" Header="ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ" IsCheckable="True" IsChecked="True"
                                      Click="MenuEmbeddedSubs1None_Click"/>
                            <Separator/>
                            <!-- Dynamic items added in code / Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑŽÑ‚ÑÑ Ð² ÐºÐ¾Ð´Ðµ -->
                        </MenuItem>
                        <!-- Embedded subtitles 2 submenu / ÐŸÐ¾Ð´Ð¼ÐµÐ½ÑŽ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ñ… ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ð¾Ð² 2 -->
                        <MenuItem x:Name="MenuEmbeddedSubs2" Header="Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ðµ (ÑÐ»Ð¾Ñ‚ 2)">
                            <MenuItem.Icon>
                                <TextBlock Text="2ï¸âƒ£" FontSize="12"/>
                            </MenuItem.Icon>
                            <MenuItem x:Name="MenuEmbeddedSubs2None" Header="ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ" IsCheckable="True" IsChecked="True"
                                      Click="MenuEmbeddedSubs2None_Click"/>
                            <Separator/>
                            <!-- Dynamic items added in code / Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑŽÑ‚ÑÑ Ð² ÐºÐ¾Ð´Ðµ -->
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuLoadPrimarySubs" Header="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²Ð½ÐµÑˆÐ½Ð¸Ðµ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ 1..." 
                                  Click="MenuLoadPrimarySubs_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE8E5;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem x:Name="MenuLoadSecondarySubs" Header="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²Ð½ÐµÑˆÐ½Ð¸Ðµ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ 2..." 
                                  Click="MenuLoadSecondarySubs_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE8E5;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuTogglePrimarySubs" Header="Ð¡ÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ 1: (Ð½ÐµÑ‚)" IsCheckable="True" IsChecked="True"
                                  Checked="MenuTogglePrimarySubs_Changed" Unchecked="MenuTogglePrimarySubs_Changed"/>
                        <MenuItem x:Name="MenuToggleSecondarySubs" Header="Ð¡ÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ 2: (Ð½ÐµÑ‚)" IsCheckable="True" IsChecked="True"
                                  Checked="MenuToggleSecondarySubs_Changed" Unchecked="MenuToggleSecondarySubs_Changed"/>
                        <Separator/>
                        <MenuItem x:Name="MenuClearAllSubs" Header="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹" Click="MenuClearAllSubs_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE74D;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <!-- Language Menu / ÐœÐµÐ½ÑŽ Ð¯Ð·Ñ‹Ðº -->
                    <MenuItem x:Name="MenuLanguage" Header="Ð¯Ð·Ñ‹Ðº">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xF2B7;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <MenuItem x:Name="MenuLanguageEnglish" Header="English" Click="MenuLanguage_Click" Tag="en" IsCheckable="True"/>
                        <MenuItem x:Name="MenuLanguageRussian" Header="Ð ÑƒÑÑÐºÐ¸Ð¹" Click="MenuLanguage_Click" Tag="ru" IsCheckable="True"/>
                    </MenuItem>
                    <!-- Help Menu / ÐœÐµÐ½ÑŽ Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ° -->
                    <MenuItem x:Name="MenuHelp" Header="Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ°">
                        <MenuItem.Icon>
                            <TextBlock Text="&#xE897;" FontFamily="Segoe MDL2 Assets" FontSize="16"/>
                        </MenuItem.Icon>
                        <MenuItem x:Name="MenuSupportProject" Header="ÐŸÐ¾Ð¼Ð¾Ñ‡ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ" Click="DonateButton_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xEB51;" FontFamily="Segoe MDL2 Assets" FontSize="12" Foreground="#FFFF6B6B"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem x:Name="MenuAbout" Header="Ðž Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ðµ..." Click="MenuAbout_Click">
                            <MenuItem.Icon>
                                <TextBlock Text="&#xE946;" FontFamily="Segoe MDL2 Assets" FontSize="12"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                </MenuItem>
            </Menu>

            <!-- App Title / ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="5,0">
                <Image Source="langvplayer.png" Width="20" Height="20" VerticalAlignment="Center" Margin="0,0,8,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                <TextBlock Text="LangV Player" Foreground="{StaticResource TextBrush}" FontSize="12" VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Window Buttons / ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð¾ÐºÐ½Ð° -->
            <StackPanel Grid.Column="3" Orientation="Horizontal">
                <!-- Donate Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð½Ð°Ñ‚Ð¾Ð² -->
                <Button x:Name="DonateButton"
                        Style="{StaticResource TitleBarButtonStyle}" 
                        Content="&#xEB51;"
                        Foreground="#FFFF6B6B"
                        ToolTip="Support the project"
                        Focusable="False"
                        Click="DonateButton_Click"/>
                
                <!-- Pin Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ -->
                <ToggleButton x:Name="PinButton" 
                              Style="{StaticResource PinButtonStyle}" 
                              Content="&#xE718;"
                              ToolTip="Always on Top"
                              Focusable="False"
                              Checked="PinButton_Checked"
                              Unchecked="PinButton_Unchecked"/>
                
                <!-- Minimize Button / ÐšÐ½Ð¾Ð¿ÐºÐ° ÑÐ²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ -->
                <Button Style="{StaticResource TitleBarButtonStyle}" 
                        Content="&#xE921;" 
                        Focusable="False"
                        Click="MinimizeButton_Click"
                        ToolTip="Minimize"/>
                
                <!-- Maximize Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ -->
                <Button x:Name="MaximizeButton"
                        Style="{StaticResource TitleBarButtonStyle}" 
                        Content="&#xE922;" 
                        Focusable="False"
                        Click="MaximizeButton_Click"
                        ToolTip="Maximize"/>
                
                <!-- Close Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ -->
                <Button Style="{StaticResource CloseButtonStyle}" 
                        Content="&#xE8BB;" 
                        Focusable="False"
                        Click="CloseButton_Click"
                        ToolTip="Close"/>
            </StackPanel>
        </Grid>

        <!-- Video Area / ÐžÐ±Ð»Ð°ÑÑ‚ÑŒ Ð²Ð¸Ð´ÐµÐ¾ -->
        <Grid Grid.Row="1" Background="Black" x:Name="VideoArea"
              AllowDrop="True"
              Drop="VideoArea_Drop"
              DragOver="VideoArea_DragOver">
            <!-- VLC VideoView for video playback / VLC VideoView Ð´Ð»Ñ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð²Ð¸Ð´ÐµÐ¾ -->
            <!-- Mouse overlay must be INSIDE VideoView with semi-transparent background per LibVLCSharp docs -->
            <!-- Ð¡Ð»Ð¾Ð¹ Ð´Ð»Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¼Ñ‹ÑˆÐ¸ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð’ÐÐ£Ð¢Ð Ð˜ VideoView Ñ Ð¿Ð¾Ð»ÑƒÐ¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ð¼ Ñ„Ð¾Ð½Ð¾Ð¼ Ð¿Ð¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ LibVLCSharp -->
            <vlc:VideoView x:Name="VideoView" Background="Black">
                <Grid>
                    <!-- Invisible overlay for mouse events / ÐÐµÐ²Ð¸Ð´Ð¸Ð¼Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ Ð´Ð»Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¼Ñ‹ÑˆÐ¸ -->
                    <Grid x:Name="VideoOverlay" 
                          Background="#01000000"
                          MouseLeftButtonDown="VideoOverlay_MouseLeftButtonDown"
                          MouseMove="VideoOverlay_MouseMove"
                          MouseWheel="VideoOverlay_MouseWheel"
                          AllowDrop="True"
                          Drop="VideoArea_Drop"
                          DragOver="VideoArea_DragOver"/>
                    
                    <!-- Placeholder when no video (on top of overlay) / Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ð²Ð¸Ð´ÐµÐ¾ (Ð¿Ð¾Ð²ÐµÑ€Ñ… overlay) -->
                    <StackPanel x:Name="NoVideoPlaceholder" 
                                VerticalAlignment="Center" 
                                HorizontalAlignment="Center"
                                Visibility="Visible"
                                AllowDrop="True"
                                Drop="VideoArea_Drop"
                                DragOver="VideoArea_DragOver">
                        <TextBlock Text="ðŸŽ¬" FontSize="64" HorizontalAlignment="Center" Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock x:Name="PlaceholderText"
                                   Text="Drop video file here or click to open" 
                                   Foreground="{StaticResource TextSecondaryBrush}" 
                                   FontSize="16" 
                                   HorizontalAlignment="Center"
                                   Margin="0,10,0,0"/>
                        <Button x:Name="OpenFileButton" 
                                Content="ðŸ“ Open Video" 
                                Margin="0,20,0,0"
                                Padding="20,10"
                                Background="{StaticResource AccentBrush}"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="14"
                                Focusable="False"
                                Cursor="Hand"
                                Click="OpenFileButton_Click"/>
                    </StackPanel>
                    
                    <!-- Subtitle Overlay / Ð¡Ð»Ð¾Ð¹ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ð¾Ð² -->
                    <Grid x:Name="SubtitleOverlay" 
                          VerticalAlignment="Bottom" 
                          Margin="20,0,20,60"
                          IsHitTestVisible="False">
                        <Grid.RowDefinitions>
                            <!-- Primary subtitles (foreign language) / ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ (Ð¸Ð½Ð¾ÑÑ‚Ñ€Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº) -->
                            <RowDefinition Height="Auto"/>
                            <!-- Secondary subtitles (translation) / Ð’Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ñ‹ (Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´) -->
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Primary Subtitle Text / Ð¢ÐµÐºÑÑ‚ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ð¾Ð² -->
                        <Border Grid.Row="0" 
                                x:Name="PrimarySubtitleBorder"
                                Background="#CC000000" 
                                CornerRadius="4" 
                                Padding="12,6"
                                HorizontalAlignment="Center"
                                Margin="0,0,0,5"
                                Visibility="Collapsed"
                                MaxHeight="150">
                            <TextBlock x:Name="PrimarySubtitleText"
                                       Foreground="White"
                                       FontSize="22"
                                       FontWeight="Medium"
                                       TextAlignment="Center"
                                       TextWrapping="Wrap"/>
                        </Border>
                        
                        <!-- Secondary Subtitle Text / Ð¢ÐµÐºÑÑ‚ Ð²Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑÑƒÐ±Ñ‚Ð¸Ñ‚Ñ€Ð¾Ð² -->
                        <Border Grid.Row="1" 
                                x:Name="SecondarySubtitleBorder"
                                Background="#AA000000" 
                                CornerRadius="4" 
                                Padding="10,4"
                                HorizontalAlignment="Center"
                                Visibility="Collapsed"
                                MaxHeight="100">
                            <TextBlock x:Name="SecondarySubtitleText"
                                       Foreground="#FFD0D0D0"
                                       FontSize="18"
                                       TextAlignment="Center"
                                       TextWrapping="Wrap"/>
                        </Border>
                    </Grid>
                </Grid>
            </vlc:VideoView>
        </Grid>

        <!-- Control Panel / ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
        <Grid Grid.Row="2" x:Name="ControlPanel" Background="{StaticResource SecondaryBackgroundBrush}" Height="120">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Timeline Slider / ÐŸÐ¾Ð»Ð·ÑƒÐ½Ð¾Ðº Ñ‚Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½Ð° -->
            <Grid Grid.Row="0" Margin="15,10,15,0">
                <Slider x:Name="TimelineSlider" 
                        Style="{StaticResource VideoSliderStyle}"
                        Minimum="0" 
                        Maximum="100" 
                        Value="0"
                        Focusable="False"
                        ValueChanged="TimelineSlider_ValueChanged"
                        Thumb.DragStarted="TimelineSlider_DragStarted"
                        Thumb.DragCompleted="TimelineSlider_DragCompleted"/>
                
                <!-- Transparent overlay for thumbnail preview mouse tracking -->
                <!-- ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¼Ñ‹ÑˆÐ¸ Ð¸ Ð¿Ð¾ÐºÐ°Ð·Ð° Ð¼Ð¸Ð½Ð¸Ð°Ñ‚ÑŽÑ€ -->
                <Border x:Name="TimelineMouseTracker"
                        Background="Transparent"
                        IsHitTestVisible="True"
                        MouseMove="TimelineMouseTracker_MouseMove"
                        MouseLeave="TimelineMouseTracker_MouseLeave"
                        MouseLeftButtonDown="TimelineMouseTracker_MouseLeftButtonDown"
                        MouseLeftButtonUp="TimelineMouseTracker_MouseLeftButtonUp"/>
                
                <!-- Thumbnail Preview Popup / Popup Ð¿Ñ€ÐµÐ²ÑŒÑŽ Ð¼Ð¸Ð½Ð¸Ð°Ñ‚ÑŽÑ€Ñ‹ -->
                <Popup x:Name="ThumbnailPopup" 
                       Placement="Top" 
                       PlacementTarget="{Binding ElementName=TimelineSlider}"
                       AllowsTransparency="True"
                       PopupAnimation="Fade"
                       IsOpen="False"
                       HorizontalOffset="0"
                       VerticalOffset="-5">
                    <Border Background="{StaticResource SecondaryBackgroundBrush}" 
                            BorderBrush="{StaticResource BorderBrush}" 
                            BorderThickness="1" 
                            CornerRadius="4"
                            Padding="4">
                        <StackPanel>
                            <!-- Thumbnail Image / Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¼Ð¸Ð½Ð¸Ð°Ñ‚ÑŽÑ€Ñ‹ -->
                            <Border x:Name="ThumbnailImageBorder"
                                    Width="200" Height="112"
                                    Background="#1E1E1E"
                                    CornerRadius="2"
                                    Visibility="Collapsed">
                                <Image x:Name="ThumbnailImage" 
                                       Stretch="Uniform"/>
                            </Border>
                            <!-- Time Label / ÐœÐµÑ‚ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ -->
                            <TextBlock x:Name="ThumbnailTimeText"
                                       Text="00:00"
                                       Foreground="{StaticResource TextBrush}"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       HorizontalAlignment="Center"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                </Popup>
            </Grid>

            <!-- Controls / Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
            <Grid Grid.Row="1" Margin="15,5,15,10">
                <!-- Playback Controls centered in window / ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€Ñƒ Ð¾ÐºÐ½Ð° -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- Rewind / ÐŸÐµÑ€ÐµÐ¼Ð¾Ñ‚ÐºÐ° Ð½Ð°Ð·Ð°Ð´ -->
                    <Button Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xEB9E;" 
                            Width="40" Height="40"
                            Focusable="False"
                            VerticalAlignment="Center"
                            Click="RewindButton_Click"
                            ToolTip="Rewind 10s"/>
                    
                    <!-- Play/Pause / Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ/ÐŸÐ°ÑƒÐ·Ð° -->
                    <Button x:Name="PlayPauseButton" 
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xE768;" 
                            Width="50" Height="50"
                            Focusable="False"
                            VerticalAlignment="Center"
                            Click="PlayPauseButton_Click"
                            ToolTip="Play/Pause"/>
                    
                    <!-- Forward / ÐŸÐµÑ€ÐµÐ¼Ð¾Ñ‚ÐºÐ° Ð²Ð¿ÐµÑ€ÐµÐ´ -->
                    <Button Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xEB9D;"
                            Focusable="False" 
                            Width="40" Height="40"
                            VerticalAlignment="Center"
                            Click="ForwardButton_Click"
                            ToolTip="Forward 10s"/>
                </StackPanel>

                <!-- Time Display on left / ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÐ»ÐµÐ²Ð° -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <TextBlock x:Name="CurrentTimeText" 
                               Text="00:00:00" 
                               Foreground="{StaticResource TextBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    <TextBlock Text=" / " 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="TotalTimeText" 
                               Text="00:00:00" 
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    
                    <!-- Speed Control / Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒÑŽ -->
                    <Border Background="#3F3F46" 
                            CornerRadius="4" 
                            Margin="15,0,0,0" 
                            Padding="2"
                            VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <Button x:Name="SpeedDownButton"
                                    Content="&#xE96F;"
                                    FontFamily="Segoe MDL2 Assets"
                                    FontSize="10"
                                    Width="24" Height="24"
                                    Background="Transparent"
                                    Foreground="{StaticResource TextBrush}"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Focusable="False"
                                    Click="SpeedDown_Click"
                                    ToolTip="Slower (Shift+[)"/>
                            <TextBlock x:Name="SpeedText"
                                       Text="1.0x"
                                       Foreground="{StaticResource TextBrush}"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Width="36"
                                       TextAlignment="Center"
                                       VerticalAlignment="Center"
                                       Cursor="Hand"
                                       MouseLeftButtonDown="SpeedText_MouseLeftButtonDown"
                                       ToolTip="Reset speed"/>
                            <Button x:Name="SpeedUpButton"
                                    Content="&#xE970;"
                                    FontFamily="Segoe MDL2 Assets"
                                    FontSize="10"
                                    Width="24" Height="24"
                                    Background="Transparent"
                                    Foreground="{StaticResource TextBrush}"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Focusable="False"
                                    Click="SpeedUp_Click"
                                    ToolTip="Faster (Shift+])"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Volume & Fullscreen on right / Ð“Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ Ð¸ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½ ÑÐ¿Ñ€Ð°Ð²Ð° -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <!-- Volume Icon (clickable to mute) / Ð˜ÐºÐ¾Ð½ÐºÐ° Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚Ð¸ (ÐºÐ»Ð¸Ðº Ð´Ð»Ñ mute) -->
                    <TextBlock x:Name="VolumeIcon" 
                               Text="&#xE767;" 
                               FontFamily="Segoe MDL2 Assets" 
                               FontSize="16"
                               Foreground="{StaticResource TextBrush}" 
                               VerticalAlignment="Center"
                               Margin="0,0,5,0"
                               Cursor="Hand"
                               MouseLeftButtonDown="VolumeIcon_MouseLeftButtonDown"
                               ToolTip="Mute"/>
                    
                    <!-- Volume Slider / ÐŸÐ¾Ð»Ð·ÑƒÐ½Ð¾Ðº Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚Ð¸ -->
                    <Slider x:Name="VolumeSlider" 
                            Width="80" 
                            Minimum="0" 
                            Maximum="200" 
                            Value="100"
                            IsMoveToPointEnabled="True"
                            Focusable="False"
                            VerticalAlignment="Center"
                            ValueChanged="VolumeSlider_ValueChanged"/>
                    
                    <!-- Volume Percentage / ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚ Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚Ð¸ -->
                    <TextBlock x:Name="VolumePercentText"
                               Text="100%"
                               Foreground="{StaticResource TextBrush}"
                               FontSize="12"
                               Width="35"
                               TextAlignment="Right"
                               VerticalAlignment="Center"
                               Margin="5,0,0,0"/>
                    
                    <!-- Playlist Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
                    <Button x:Name="PlaylistButton"
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xE8FD;" 
                            Width="40" Height="40"
                            Margin="5,0,0,0"
                            Focusable="False"
                            Click="PlaylistButton_Click"
                            ToolTip="Playlist"/>
                    
                    <!-- Compact/PiP Mode Button / ÐšÐ½Ð¾Ð¿ÐºÐ° ÐºÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð° -->
                    <Button x:Name="CompactModeButton"
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xEE47;" 
                            Width="40" Height="40"
                            Margin="5,0,0,0"
                            Focusable="False"
                            Click="CompactModeButton_Click"
                            ToolTip="Compact Mode (P)"/>
                    
                    <!-- Fullscreen Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ ÑÐºÑ€Ð°Ð½Ð° -->
                    <Button x:Name="FullscreenButton"
                            Style="{StaticResource ControlButtonStyle}" 
                            Content="&#xE740;" 
                            Width="40" Height="40"
                            Margin="5,0,0,0"
                            Focusable="False"
                            Click="FullscreenButton_Click"
                            ToolTip="Fullscreen"/>
                </StackPanel>
            </Grid>
        </Grid>
        </Grid>
        
        <!-- Playlist Panel / ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
        <Grid x:Name="PlaylistPanel" Grid.Column="1" Width="300" Background="{StaticResource SecondaryBackgroundBrush}"
              Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Playlist Header / Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
            <Grid Grid.Row="0" Background="{StaticResource TitleBarBrush}">
                <TextBlock Text="ðŸ“‹ ÐŸÐ»ÐµÐ¹Ð»Ð¸ÑÑ‚" 
                           Foreground="{StaticResource TextBrush}" 
                           FontSize="14" 
                           VerticalAlignment="Center" 
                           Margin="10,0,0,0"/>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,5,0">
                    <!-- Add Files Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                    <Button Style="{StaticResource TitleBarButtonStyle}"
                            Content="&#xE710;"
                            Focusable="False"
                            Click="PlaylistAddFiles_Click"
                            ToolTip="Add files"/>
                    
                    <!-- Clear Playlist Button / ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
                    <Button Style="{StaticResource TitleBarButtonStyle}"
                            Content="&#xE74D;"
                            Focusable="False"
                            Click="PlaylistClear_Click"
                            ToolTip="Clear playlist"/>
                </StackPanel>
            </Grid>
            
            <!-- Playlist Items / Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð° -->
            <ListBox x:Name="PlaylistListBox" 
                     Grid.Row="1" 
                     Background="Transparent"
                     BorderThickness="0"
                     Foreground="{StaticResource TextBrush}"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                     SelectionMode="Single"
                     MouseDoubleClick="PlaylistListBox_MouseDoubleClick"
                     AllowDrop="True"
                     Drop="PlaylistListBox_Drop"
                     DragOver="PlaylistListBox_DragOver">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Padding" Value="10,8"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border x:Name="Bd" 
                                            Background="Transparent" 
                                            Padding="{TemplateBinding Padding}"
                                            BorderThickness="0,0,0,1"
                                            BorderBrush="{StaticResource BorderBrush}">
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#30FFFFFF"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{StaticResource AccentBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Playing indicator / Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ -->
                            <TextBlock Grid.Column="0" 
                                       Text="â–¶" 
                                       Foreground="{StaticResource AccentBrush}"
                                       FontSize="12"
                                       Margin="0,0,8,0"
                                       VerticalAlignment="Center"
                                       Visibility="{Binding IsPlaying, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            
                            <!-- File name / Ð˜Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° -->
                            <TextBlock Grid.Column="1" 
                                       Text="{Binding FileName}" 
                                       Foreground="{StaticResource TextBrush}"
                                       TextTrimming="CharacterEllipsis"
                                       VerticalAlignment="Center"
                                       ToolTip="{Binding FilePath}"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </Grid>
</Window>
